# Bandstand confluent connector

#TODO - this needs completely redoing

## Global values

| Key                | Type   | Default | Description                                           |
|--------------------|--------|---------|-------------------------------------------------------|
| global.aws.account | string |         | The AWS account the helm chart is installed into      |
| global.env         | string |         | The environment, either test, preprod or prod         |
| global.image.tag   | string |         | The tag for container image to be used in the service |

## Values

| Key                                 | Type   | Default                          | Description                                                                                                                                                                                                                                                                                          |
|-------------------------------------|--------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| dockerRegistry                      | string | `ktechartifacts-docker.jfrog.io` | Docker registry to pull images from                                                                                                                                                                                                                                                                  |
| enforceCpuLimits                    | bool   |                                  | By default CPU will burst to use spare capacity on the node. Setting this flag will add a cpu limit with the same value as `resources.requests.cpu`. It is recommended to set this flag in performance testing environments to ensure recorded performance isn't based on unallocated capacity       |
| gitRepo                             | string | `.Release.Name`                  | The name of the repository for the service                                                                                                                                                                                                                                                           |
| imageName                           | string | `.Release.Name`                  | Name of the docker image to run                                                                                                                                                                                                                                                                      |
| imagePullSecret                     | string | `rt-docker-config`               | Docker registry secret for pulling image                                                                                                                                                                                                                                                             |
| owner                               | string |                                  | The GitHub team that owns the service                                                                                                                                                                                                                                                                |
| config                              | object | `{}`                             | An object containing base config for the service - use this for creating base config files.                                                                                                                                                                                                          |
| resources.requests.cpu              | string | `100m`                           | [Requests](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) for container CPU resources measured in cpu units, one core is 1000m, see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu)       |
 | resources.requests.memory           | string | `256Mi`                          | Container memory [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-memory) (both set to the same value)                  |
| resources.requests.ephemeralStorage | string | `64Mi`                           | Container ephemeral storage [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#local-ephemeral-storage) (both set to the same value) |
| systemCode                          | string | `.Release.Name`                  | The systemCode for the service                                                                                                                                                                                                                                                                       |
| systemGroup                         | string |                                  | The systemGroup for the service                                                                                                                                                                                                                                                                      |
| backoffLimit                        | number | `6`                              | [Back off limit](https://kubernetes.io/docs/concepts/workloads/controllers/job/#pod-backoff-failure-policy) To prevent restart on failure set to 0                                                                                                                                                   |
| concurrencyPolicy                   | string | `Allow`                          | [Concurrency Policy](https://kubernetes.io/docs/tasks/job/automated-tasks-with-cron-jobs/#concurrency-policy) To prevent restart on failure set to `Forbid`                                                                                                                                          |
| suspend                             | bool   | false                            | Suspend the cron job                                                                                                                                                                                                                                                                                 |
| volume.persistent                   | string |                                  | Adds a persistent volume of the amount set, e.g. 1G                                                                                                                                                                                                                                                  |
| volume.ephemeral                    | string |                                  | Size of ephemeral storage, e.g. 10G mounted at /tmp standard emptyfile tmp directory added if not set.                                                                                                                                                                                               |
| ttlSecondsAfterFinished             | number | 604800 (1 week)                  | How long to keep a Job around for after it has completed                                                                                                                                                                                                                                             |
