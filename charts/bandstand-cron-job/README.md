# Bandstand cron job

## Global values

| Key                | Type   | Default | Description                                           |
|--------------------|--------|---------|-------------------------------------------------------|
| global.aws.account | string |         | The AWS account the helm chart is installed into      |
| global.env         | string |         | The environment, either test, preprod or prod         |
| global.image.tag   | string |         | The tag for container image to be used in the service |

## Values

| Key                                 | Type   | Default                          | Description                                                                                                                                                                                                                                                                                         |
|-------------------------------------|--------|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| additionalEnvVars                   | object | `{}`                             | An object containing additional environment variables                                                                                                                                                                                                                                               |
| environmentEnvVars                  | object | `{}`                             | An object containing environment specific additional environment variables. Use this in *-values.yaml files to not overwrite the additionalEnvVars object                                                                                                                                           |
| dockerRegistry                      | string | `ktechartifacts-docker.jfrog.io` | Docker registry to pull images from                                                                                                                                                                                                                                                                 |
| gitRepo                             | string | `.Release.Name`                  | The name of the repository for the service                                                                                                                                                                                                                                                          |
| imagePullSecret                     | string | `rt-docker-config`               | Docker registry secret for pulling image                                                                                                                                                                                                                                                            |
| jobContainer.arguments              | list   |                                  | Override the default container arguments for the job Pod                                                                                                                                                                                                                                            |
| jobContainer.command                | string |                                  | Override the default container command for the job Pod                                                                                                                                                                                                                                              |
| owner                               | string |                                  | The GitHub team that owns the service                                                                                                                                                                                                                                                               |
| envConfig                           | object | `{}`                             | An object containing environment config for the service - use this for creating environment specific config files.                                                                                                                                                                                  |
| resources.requests.cpu              | string | `100m`                           | [Requests](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) for container CPU resources measured in cpu units, one core is 1000m, see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu)      |
| resources.requests.memory           | string | `256Mi`                          | Container memory [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits)see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-memory) (both set to the same value)                  |
| resources.requests.ephemeralStorage | string | `64Mi`                           | Container ephemeral storage [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits)see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#local-ephemeral-storage) (both set to the same value) |
| systemCode                          | string | `.Release.Name`                  | The systemCode for the service                                                                                                                                                                                                                                                                      |
| systemGroup                         | string |                                  | The systemGroup for the service                                                                                                                                                                                                                                                                     |
| backoffLimit                        | number | `6`                              | [Back off limit](https://kubernetes.io/docs/concepts/workloads/controllers/job/#pod-backoff-failure-policy) To prevent restart on failure set to 0                                                                                                                                                  |
| concurrencyPolicy                   | string | `Allow`                          | [Concurrency Policy](https://kubernetes.io/docs/tasks/job/automated-tasks-with-cron-jobs/#concurrency-policy) To prevent restart on failure set to `Forbid`                                                                                                                                         |
| suspend                             | bool   | false                            | Suspend the cron job                                                                                                                                                                                                                                                                                |
| volume.enabled                      | bool   |                                  | True if persistent volume is required                                                                                                                                                                                                                                                               |
| volume.storage                      | string | `1Gi`                            | Amount of volume storage                                                                                                                                                                                                                                                                            |
| ttlSecondsAfterFinished             | number | 604800 (1 week)                  | How long to keep a Job around for after it has completed                                                                                                                                                                                                                                            |
