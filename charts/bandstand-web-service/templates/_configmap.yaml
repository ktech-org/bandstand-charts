{{- define "bandstand-web-service.configmap" -}}
{{- $relName := .Release.Name -}}
{{- if .Values.nameSuffix }}
{{- $relName = print .Release.Name "-" .Values.nameSuffix }}
{{- end }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ $relName }}
  labels: {{- include "bandstand-web-service.labels" . | nindent 4 }}
{{- if or .Values.properties .Values.envProperties }}
data:
  app.properties: |
    {{- if .Values.properties }}
      {{-  .Values.properties | toYaml | trimPrefix "|" | trimPrefix "\n" | nindent 2 }}
    {{- end }}
    {{- if .Values.envProperties }}
      {{-  .Values.envProperties | toYaml | trimPrefix "|" | trimPrefix "\n" | nindent 2 }}
    {{- end }}
{{- end }}
{{- end -}}
