# Bandstand test runner

## Global values

| Key                | Type   | Default | Description                                           |
|--------------------|--------|---------|-------------------------------------------------------|
| global.aws.account | string |         | The AWS account the helm chart is installed into      |
| global.env         | string |         | The environment, either test, preprod or prod         |
| global.image.tag   | string |         | The tag for container image to be used in the service |

## Values

| Key                                 | Type   | Default                          | Description                                                                                                                                                                                                                                                                                          |
|-------------------------------------|--------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| commonEnv                           | list   | `[]`                             | List of [environment variables](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#environment-variables) to be applied to all test containers                                                                                                                           |
| commonEnvFrom                       | object | `{}`                             | References to ConfigMaps / Secrets which will be mapped to environment variables. For more details see [here](https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#configure-all-key-value-pairs-in-a-configmap-as-container-environment-variables)                     |
| dockerRegistry                      | string | `ktechartifacts-docker.jfrog.io` | Docker registry to pull images from                                                                                                                                                                                                                                                                  |
| gitRepo                             | string | `.Release.Name`                  | The name of the repository for the service                                                                                                                                                                                                                                                           |
| imageName                           | string | `.Release.Name`                  | Name of the docker image to run                                                                                                                                                                                                                                                                      |
| imagePullSecret                     | string | `rt-docker-config`               | Docker registry secret for pulling image                                                                                                                                                                                                                                                             |
| owner                               | string |                                  | The GitHub team that owns the service                                                                                                                                                                                                                                                                |
| resources.requests.cpu              | string | `100m`                           | [Requests](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) for container CPU resources measured in cpu units, one core is 1000m, see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu)       |
| resources.requests.memory           | string | `256Mi`                          | Container memory [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-memory) (both set to the same value)                  |
| resources.requests.ephemeralStorage | string | `64Mi`                           | Container ephemeral storage [Requests and Limit](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits) see [here](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#local-ephemeral-storage) (both set to the same value) |
| systemCode                          | string | `.Release.Name`                  | The systemCode for the service                                                                                                                                                                                                                                                                       |
| systemGroup                         | string |                                  | The systemGroup for the service                                                                                                                                                                                                                                                                      |
| testRuns                            | list   | `[]`                             | A list of test runs to execute - each run equates ot a container pod environment                                                                                                                                                                                                                     |
| testRuns[].arguments                | list   | `[]`                             | Override the container (Helm) arguments (This is the docker CMD)                                                                                                                                                                                                                                     |
| testRuns[].command                  | list   | `[]`                             | Override the container (Helm) command (this is the docker ENTRYPOINT)                                                                                                                                                                                                                                |
| testRuns[].env                      | list   | `[]`                             | A list of additional [environment variables](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#environment-variables) to be applied for this test run                                                                                                                   |
| testRuns[].envFrom                  | object | `{}`                             | Additional references to ConfigMaps / Secrets which will be mapped to environment variables for this test run                                                                                                                                                                                        |
| testRuns[].name                     | list   | `[]`                             | A name for the test run - added as a suffix to the pod name                                                                                                                                                                                                                                          |
